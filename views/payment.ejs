<!DOCTYPE html>
<html>
<title>Kisabucks</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Verdana">
<link href="https://fonts.googleapis.com/css?family=Nanum+Myeongjo" rel="stylesheet">

<script src="https://code.jquery.com/jquery-2.2.4.js" integrity="sha256-iT6Q9iMJYuQiMWNd9lDyBUStIq/8PuOW33aOqmvFpqI="
    crossorigin="anonymous">
</script>
<style>
        html,
        body,
        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
          font-family: "Verdana", "Nanum Myeongjo", sans-serif
        }
      </style>
      
      <div class="w3-top">
        <div class="w3-bar w3-white w3-wide w3-padding w3-card">
          <a href="/" class="w3-bar-item w3-button"><b>KISABUCKS</b> </a>
          <!-- Float links to the right. Hide them on small screens -->
          <div class="w3-right w3-hide-small">
            <button class="w3-bar-item w3-button" id=logout>LOGOUT</button>
      
            <a href="mypage" class="w3-bar-item w3-button">MYPAGE</a>
          </div>
        </div>
      </div>

    <!-- w3-content defines a container for fixed size centered content, 
and is wrapped around the whole page content, except for the footer in this example -->
    <div class="w3-content" style="max-width:1400px">
        <div class="w3-container w3-padding-32"> </div>

        <!-- Header -->
        <div class="w3-container w3-center w3-padding-16">
            <h1><b> 결제 </b></h1>
        </div>


        <!-- main -->
        <div class="container w3-center">

            <div class="row">
                <div class="col-sm-12 col-md-10 col-md-offset-1">
                    <table class="table table-hover tablecenter">
                        <style>
                            .tablecenter {
                                    margin: auto;
                                }
                                table{ border-spacing:50px;}
                                .my-hr3 {border: 0;
                                        height: 3px;
                                        background: #ccc;}
                            
                            </style>
                        <thead>
                            <th>
                                <h4><b>이미지</b></h4>
                            </th>
                            <th class="text-center">
                                <h4><b>상품정보</b></h4>
                            </th>
                            <th class="text-center">
                                <h4><b>수량</b></h4>
                            </th>
                            <th class="text-center">
                                <h4><b>가격</b></h4>
                            </th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="col-sm-8 col-md-6">
                                    <div class="media">
                                        <a class="thumbnail pull-left" href="#"> <img class="media-object" src="<%=data[0].menu_pic%>"
                                                style="width: 72px; height: 72px;"> </a>
                                        <div class="media-body">
                                            <p></p>
                                        </div>
                                    </div>
                                </td>
                                <td class="col-sm-1 col-md-1 text-center"><strong>
                                        <%=data[0].menu_name%></strong></td>
                                <p></p>

                                </td>
                                <td class="col-sm-1 col-md-1 text-center"><strong>1</strong></td>
                                <p></p>
                                <td class="col-sm-1 col-md-1 text-center"><strong>
                                        <%=data[0].menu_price%>원</strong></td>
                                <p></p>
                                <td class="col-sm-1 col-md-1">
                            </tr>

                            </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>



        <!-- new table -->
        <div class="col-sm-12 col-md-10 col-md-offset-1">

            <table class="table table-hover tablecenter">

                <tbody>
                    <hr class="my-hr3">
                    <tr>
                        <td>   </td>
                        <td>   </td>
                        <td>   </td>
                        <td>   </td>
                        <td>
                            <h3>Total</h3>
                        </td>
                        <td class="text-right">
                            <h3><strong>
                                    <%=data[0].menu_price%>원</strong></h3>
                        </td>
                        <td>
                            <!-- pay button -->
                            <p><button id="payment" class="w3-button w3-white w3-padding-large w3-right w3-border"><b>결제하기</b></button></p>
                        </td>
                    </tr>
                    <tr>
                        <td>   </td>
                        <td>   </td>

                    </tr>
                </tbody>
            </table>
            <input type="hidden" id="mid" value="<%=data[0].mid%>">

        </div>

     
        <!-- Introduction menu -->
        <div class="w3-col l4">

        </div>
        <!-- END GRID -->
    </div><br>

    <!-- END w3-content -->
    </div>

    <script>

        var mid = $("#mid").val();
        var menu;

        $.ajax({
            url: 'http://localhost:3000/menu',
            type: 'post',
            async : false,
            data: {
                "mid": mid
            },
            
            success: function (result) {
                console.log(result[0])
                menu = result[0];
            },

            error: function (request, status, error) {
               console.log(error);
            }

        })


        $("#payment").click(function(){

        $.ajax({

            url: "http://localhost:3000/withdraw",
            type: 'post',
            data:{

                "price" : menu.menu_price   
            },
            
            error: function(){   
                window.location.href = '/'
            }
               

            
        }
        )



        })
        
    </script>
</body>


</html>